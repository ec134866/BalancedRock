<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no' />
<title>odm_orthophoto.tif</title>

<!-- Leaflet -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@0.7.5/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@0.7.5/dist/leaflet.js"></script>

<!-- Leaflet.Measure plugin -->
<link rel="stylesheet" href="https://unpkg.com/leaflet-measure/dist/leaflet-measure.css" />
<script src="https://unpkg.com/leaflet-measure/dist/leaflet-measure.js"></script>

<style>
	body { margin:0; padding:0; }
	body, table, tr, td, th, div, h1, h2, input {
	font-family: "Calibri", "Trebuchet MS", "Ubuntu", Serif;
	font-size: 11pt;
	}
	#map { position:absolute; top:0; bottom:0; width:100%; }
	.ctl {
	padding: 2px 10px 2px 10px;
	background: white;
	background: rgba(255,255,255,0.9);
	box-shadow: 0 0 15px rgba(0,0,0,0.2);
	border-radius: 5px;
	text-align: right;
	}
	.title { font-size: 18pt; font-weight: bold; }
	.src { font-size: 10pt; }
	.unit-toggle {
	background: white;
	background: rgba(255,255,255,0.9);
	border-radius: 5px;
	padding: 5px 10px;
	box-shadow: 0 0 10px rgba(0,0,0,0.3);
	cursor: pointer;
	}
	.unit-toggle:hover {
	background: #eee;
	}
</style>
</head>
<body>

<div id="map"></div>

<script>
// Base layers
var osm = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
	attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
	minZoom: 17, maxZoom: 21
});

var cartodb = L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png', {
	attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, &copy; <a href="https://carto.com/attribution">CartoDB</a>',
	minZoom: 17, maxZoom: 21
});

var white = L.tileLayer(
	"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEAAQMAAABmvDolAAAAA1BMVEX///+nxBvIAAAAH0lEQVQYGe3BAQ0AAADCIPunfg43YAAAAAAAAAAA5wIhAAAB9aK9BAAAAABJRU5ErkJggg==",
	{minZoom: 17, maxZoom: 21}
);

var lyr = L.tileLayer('./{z}/{x}/{y}.png', {
	tms: 1, opacity: 0.7, attribution: "", minZoom: 17, maxZoom: 21
});

// Map setup
var map = L.map('map', {
	center: [38.97386130742619, -77.39226081137471],
	zoom: 21,
	minZoom: 17,
	maxZoom: 21,
	layers: [osm, lyr]
});

var basemaps = {"OpenStreetMap": osm, "Light Map": cartodb, "No background": white};
var overlaymaps = {"Orthophoto": lyr};

// Title
var title = L.control();
title.onAdd = function(map) {
	this._div = L.DomUtil.create('div', 'ctl title');
	this._div.innerHTML = "odm_orthophoto.tif";
	return this._div;
};
title.addTo(map);

// Attribution
var src = 'Generated by <a href="https://gdal.org/programs/gdal2tiles.html">GDAL2Tiles</a>, &copy; 2008 <a href="http://www.klokan.cz/">Klokan Petr Pridal</a>';
var attribution = L.control({position: 'bottomleft'});
attribution.onAdd = function(map) {
	this._div = L.DomUtil.create('div', 'ctl src');
	this._div.innerHTML = src;
	return this._div;
};
attribution.addTo(map);

// Layers control
L.control.layers(basemaps, overlaymaps, {collapsed: false}).addTo(map);

// Fit map to bounds
map.fitBounds([[38.9718124262654, -77.38943153617745], [38.97591018858697, -77.39509008657195]]);

// Function to create measurement control
function createMeasureControl(units) {
	return L.control.measure({
	primaryLengthUnit: units === 'metric' ? 'meters' : 'feet',
	secondaryLengthUnit: units === 'metric' ? 'kilometers' : 'miles',
	primaryAreaUnit: units === 'metric' ? 'sqmeters' : 'acres',
	secondaryAreaUnit: units === 'metric' ? 'hectares' : 'sqmiles',
	activeColor: '#ABE67E',
	completedColor: '#C8F2BE'
	});
}

// Start in metric
var currentUnits = 'metric';
var measureControl = createMeasureControl(currentUnits).addTo(map);

// Unit toggle control
var UnitToggle = L.Control.extend({
	options: { position: 'topright' },
	onAdd: function(map) {
	var div = L.DomUtil.create('div', 'unit-toggle');
	div.innerHTML = 'Switch to Imperial';
	div.onclick = function() {
		// Remove old control
		map.removeControl(measureControl);

		// Swap units
		currentUnits = currentUnits === 'metric' ? 'imperial' : 'metric';
		measureControl = createMeasureControl(currentUnits).addTo(map);

		// Update label
		div.innerHTML = currentUnits === 'metric' ? 'Switch to Imperial' : 'Switch to Metric';
	};
	return div;
	}
});
map.addControl(new UnitToggle());
</script>

</body>
</html>
